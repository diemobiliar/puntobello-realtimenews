{"version":3,"file":"ChannelSettings.js","sourceRoot":"","sources":["../../../../src/webparts/realTimeNewsFeed/components/ChannelSettings.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\n\n// Fluent UI components and utilities\nimport { Modal, IconButton, Checkbox, Stack } from '@fluentui/react';\nimport { getId } from '@fluentui/react/lib/Utilities';\n\n// Context\nimport { useAppContext } from '../contexts/AppContext';\n\n// Models\nimport { IChannels2SubscriptionItem, IChannelSettingsProps } from '../models';\n\n// Utilities\nimport { Utility } from '../utils/utils';\n\n// Styles\nimport { \n    cancelIcon, \n    contentStyles, \n    iconButtonStyles, \n    customCheckboxStyles, \n    stackTokens, \n    fadeInKeyframes \n} from '../styles/channelsettings';\n\n/**\n * `ChannelSettings` is a React functional component that renders a modal dialog for managing user subscriptions to news channels.\n * It allows users to select or deselect channels to subscribe to, and reflects changes immediately in the UI.\n * \n * @param {IChannelSettingsProps} props - The properties passed to this component.\n * @param {string} props.myNewsGuid - The GUID representing the user's personalized news channel.\n * @param {IChannels2SubscriptionItem[]} props.channelsConfig - Array of channels available for subscription.\n * @param {string} props.modalSettingsTitle - The title displayed at the top of the modal dialog.\n * @param {boolean} props.modalVisible - A boolean indicating whether the modal dialog is visible.\n * @param {() => void} props.closeModal - Callback function to close the modal dialog.\n * @param {(item: IChannels2SubscriptionItem, ev: React.FormEvent<HTMLElement>, isChecked: boolean) => void} props.changeChannelSettings - Callback function to handle channel subscription changes.\n * \n * @returns {JSX.Element | null} - Returns a JSX element representing the modal dialog, or `null` if the modal is not visible.\n */\nexport function ChannelSettings(props: IChannelSettingsProps) {\n    const {\n        myNewsGuid,\n        channelsConfig,\n        modalSettingsTitle,\n        modalVisible,\n        closeModal,\n        changeChannelSettings,\n    } = props;\n    const { pageLanguage } = useAppContext();\n\n    // State to control the visibility of the modal\n    const [isVisible, setIsVisible] = React.useState(modalVisible);\n\n    // Effect to insert custom CSS keyframes for modal animations on initial render\n    React.useEffect(() => {\n        const styleSheet = document.styleSheets[0];\n        styleSheet.insertRule(fadeInKeyframes, styleSheet.cssRules.length);\n    }, []);\n\n    // Effect to synchronize the modal's visibility state with the prop `modalVisible`\n    React.useEffect(() => {\n        if (modalVisible) {\n            setIsVisible(true);\n        } else {\n            setIsVisible(false);\n        }\n    }, [modalVisible]);\n\n    // Function to handle closing the modal dialog\n    function closeModalDialog() {\n        closeModal();\n    }\n\n    // If the modal is not visible, return null to avoid rendering it\n    if (!isVisible) {\n        return null;\n    }\n\n    /**\n     * Function to handle changes in channel subscription checkboxes.\n     * \n     * @param {IChannels2SubscriptionItem} item - The channel item whose subscription status changed.\n     * @param {React.FormEvent<HTMLElement>} ev - The event object associated with the change.\n     * @param {boolean} isChecked - The new checked status of the checkbox.\n     */\n    function channelCheckboxChanged(item: IChannels2SubscriptionItem, ev?: React.FormEvent<HTMLElement | HTMLInputElement>, isChecked?: boolean) {\n        changeChannelSettings(item, ev, isChecked ?? false);\n    }\n\n    return (\n        <Modal\n            titleAriaId={getId('title')}\n            isOpen={modalVisible}\n            onDismiss={closeModalDialog}\n            isModeless={false}\n            isBlocking={true}\n            containerClassName={`${contentStyles.container} ${'modalFadeIn'}`}>\n            <div className={contentStyles.header}>\n                <span id={getId('title')}>{modalSettingsTitle}</span>\n                <IconButton\n                    styles={iconButtonStyles}\n                    iconProps={cancelIcon}\n                    ariaLabel={Utility.getStringTranslation4Locale('ariaCloseChannelSettings', pageLanguage.Language)}\n                    onClick={closeModal}\n                />\n            </div>\n            <div className={contentStyles.body}>\n                <Stack tokens={stackTokens}>\n                    {channelsConfig.map((item) => {\n                        if (myNewsGuid != item.TermGuid) {\n                            return (\n                                <Checkbox\n                                    key={item.TermGuid}\n                                    label={Utility.getChannelText(pageLanguage, item)}\n                                    defaultChecked={item.Subscribed}\n                                    onChange={(ev, isChecked) => channelCheckboxChanged(item, ev, isChecked)}\n                                    styles={customCheckboxStyles}\n                                />\n                            );\n                        }\n                    })}\n                </Stack>\n            </div>\n        </Modal>\n    );\n}\n"]}